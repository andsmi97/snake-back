(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{41:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(32),i=n.n(o),s=(n(41),n(10)),u=n(17),l=n(35),d="LEFT",p="RIGHT",f="UP",m="DOWN",b="PLAY",j="PAUSE",h="STOP",y=function(e){var t=e.gameState,n=Object(l.a)(e,["gameState"]),r=Object(c.useRef)(null),o=Object(c.useState)(null),i=Object(s.a)(o,2),d=i[0],p=i[1];return Object(c.useEffect)((function(){var e=r.current.getContext("2d");p(e)}),[]),Object(c.useEffect)((function(){!function(e){if(d){d.clearRect(0,0,d.canvas.width,d.canvas.height);var t=new Path2D;t.arc(e.food.x,e.food.y,5,0,360),d.fillStyle="red",d.fill(t),["player","player2"].forEach((function(t){var n=new Path2D;e[t].positions.forEach((function(a){d.fillStyle=e[t].color,n.rect(a.x,a.y,10,10),d.fill(n)}))}))}}(t)}),[t,d]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("canvas",Object(u.a)(Object(u.a)({ref:r},n),{},{id:"canvas"}))})},O={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capsLock:20,escape:27,pageUp:33,Space:32,pageDown:34,end:35,home:36,arrowLeft:37,arrowUp:38,arrowRight:39,arrowDown:40,printScreen:44,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindowKey:91,rightWindowKey:92,selectKey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numLock:144,scrollLock:145,MyComputer:182,MyCalculator:183,semiColon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,openBracket:219,backSlash:220,closeBraket:221,singleQuote:222},g=n(33),w=n.n(g),v=n(34),x=n.n(v)()("https://snake-online.ru"),k={time:60,gameStatus:h,winner:"none",player:{currentPoints:0,color:"#2196f3",direction:p,speed:10,positions:[{x:0,y:0}]},player2:{currentPoints:0,color:"#00b248",direction:d,speed:10,positions:[{x:240,y:240}]},food:{x:0,y:0}},S=function(){var e=Object(c.useState)(k),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)("player"),i=Object(s.a)(o,2),u=i[0],l=i[1];Object(c.useEffect)((function(){return x.on("gameState",(function(e){r(e)})),x.on("action",(function(e){e.player,e.direction})),x.on("start",(function(e){e.message,e.seed})),x.on("pause",(function(e){})),x.on("reset",(function(e){})),x.on("continue",(function(e){})),function(){x.removeListener("action"),x.removeListener("gameStatus"),x.removeListener("start"),x.removeListener("pause"),x.removeListener("continue"),x.removeListener("reset")}}),[]);var h=function(){x.emit("start",{message:"".concat(u," started"),seed:Math.random()})},g=function(){x.emit("pause","".concat(u," paused"))},v=function(){x.emit("continue","".concat(u," continued"))};return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(w.a,{handleKeys:["w","a","s","d"],onKeyEvent:function(e,t){switch(t.keyCode){case O.w:case O.arrowUp:x.emit("action",{player:u,direction:f});break;case O.a:case O.arrowLeft:x.emit("action",{player:u,direction:d});break;case O.d:case O.arrowRight:x.emit("action",{player:u,direction:p});break;case O.s:case O.arrowDown:x.emit("action",{player:u,direction:m})}},handleEventType:"keydown"}),Object(a.jsxs)("div",{className:"game-container",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"".concat(n.player.currentPoints," ").concat("player"===u?"blue":"green"," ").concat(n.player2.currentPoints)}),Object(a.jsxs)("p",{children:["Winner:"," ","none"!==n.winner?"player"===n.winner?"blue":"green":""]}),Object(a.jsx)("p",{children:n.time}),n.gameStatus===b?Object(a.jsx)("button",{onClick:g,children:"Pause"}):n.gameStatus===j?Object(a.jsx)("button",{onClick:v,children:"Continue"}):Object(a.jsx)("button",{onClick:h,children:"Start"}),Object(a.jsx)("button",{onClick:function(){x.emit("reset","".concat(u," reseted"))},children:"Reset"}),Object(a.jsx)("button",{onClick:function(e){l("player"===u?"player2":"player")},children:"changePlayer"})]}),Object(a.jsx)("div",{children:Object(a.jsx)(y,{gameState:n,width:"250",height:"250"})})]})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root")),L()}},[[76,1,2]]]);
//# sourceMappingURL=main.325cc972.chunk.js.map